<% let is_update = false; if(typeof data.product !== "undefined"){ is_update = true;
} %>
<div class="content-page">
  <div class="content">
    <!-- Start Content-->
    <div class="container-fluid">
      <div class="row page-title">
        <div class="col-md-12">
          <h4 class="mb-1 mt-0"><%- is_update ? 'Edit' : 'Add New' %> PRODUCTs</h4>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="card">
            <div class="card-body">
              <form
                method="POST"
                action="<%- is_update ? admin_url + '/products/update' : admin_url + '/products/store' %>"
                class="form-horizontal form-validate product-form-validate"
                novalidate="novalidate"
              >
                <% if(is_update){ %>
                <input type="hidden" name="id" value="<%- data.product._id %>" />
                <% } %>
                <div class="row section-repeater mb-2" data-startingIndex="1">
                  <div class="r-group col-md-12">
                    <div class="row">
                      <div class="form-group col-md-12">
                        <label
                          >Title <span class="text-danger">*</span></label
                        >
                        <input
                          type="text"
                          class="form-control title"
                          placeholder="Title"
                          name="product[0][title]"
                          id="title"
                          autocomplete=""
                          value="<%- is_update ? data.product.title : '' %>"
                        />
                      </div>
                      <div class="form-group col-md-12">
                        <label>Short Description <span class="text-danger">*</span></label>
                        <textarea
                          type="text"
                          class="form-control shortDescription"
                          placeholder="Short Description"
                          name="product[0][shortDescription]"
                          id="shortDescription"
                        >
<%= is_update ? data.product.shortDescription : '' %></textarea
                        >
                      </div>
                      <div class="form-group col-md-12"><label>Full Description <span class="text-danger">*</span></label>
                        <textarea
                          type="text"
                          class="form-control fullDescription"
                          placeholder="Full Description"
                          name="product[0][fullDescription]"
                          id="fullDescription"
                        >
<%= is_update ? data.product.fullDescription : '' %></textarea
                        ></div>
                        <div class="form-group col-md-12">
                          <label
                            >Amount <span class="text-danger">*</span></label
                          >
                          <input
                            type="text"
                            class="form-control amount"
                            placeholder="Amount"
                            name="product[0][amount]"
                            id="amount"
                            autocomplete=""
                            value="<%- is_update ? data.product.amount : '' %>"
                          />
                        </div>
                        <div class="form-group col-md-12">
                          <label
                            >Quantity <span class="text-danger">*</span></label
                          >
                          <input
                            type="text"
                            class="form-control quantity"
                            placeholder="Quantity"
                            name="product[0][quantity]"
                            id="quantity"
                            autocomplete=""
                            value="<%- is_update ? data.product.quantity : '' %>"
                          />
                        </div>
                        <div class="form-group col-md-12">
                          <label class="form-label" for="customFile">Image<span class="text-danger">*</span></label>
                          <input type="file" class="form-control" id="customFile" />
                        </div>
                        <div class="form-group col-md-12">
                          <label>Category <span class="text-danger">*</span></label>
                          <select class="select form-control" placeholder="Category" name="product[0][category]" id="category">
                            <option value="">Select Category</option>
                            <% if(typeof data.Category !=="undefined" && data.Category.length) { %>
                              <% for (let code of data.Category) { %>
                                <option value=<%-JSON.stringify(code)%> id="<%-code._id%>"><%-code.title%> </option>
                              <% } %>
                            <% } %>
                          </select>
                        </div>
                      <div
                        class="input-group-append col-md-auto"
                        style="display: none"
                      >
                        <span class="input-group-btn mb-1">
                          <button
                            class="btn btn-sm btn-danger r-btnRemove"
                            type="button"
                          >
                            Remove
                          </button>
                        </span>
                      </div>
                    </div>
                  </div>
                  <% if(!is_update){ %>
                  <div class="col-12 btn-div">
                    <button
                      type="button"
                      id="add-more"
                      class="btn btn-sm btn-primary r-btnAdd btn-black"
                    >
                      <i class="ft-plus"></i> Add more Products
                    </button>
                  </div>
                  <% } %>
                  <div
                    class="input-group-append col-md-auto"
                    style="display: none"
                  >
                    <span class="input-group-btn mb-1">
                      <button
                        class="btn btn-sm btn-danger r-btnRemove"
                        type="button"
                      >
                        Remove
                      </button>
                    </span>
                  </div>
                </div>

                <!-- <div class="">
                  <button type="submit" class="btn btn-primary btn-min-width">
                    Update password
                  </button>
                </div> -->
                <div
                  class="form-actions center"
                  style="display: flex; justify-content: flex-end"
                >
                  <a href="<%-admin_url%>/product"
                    ><button
                      type="button"
                      class="btn btn-danger mr-1 btn-min-width"
                    >
                      Cancel
                    </button></a
                  >
                  <button type="submit" class="btn btn-primary r-btnSubmit">
                    <%- is_update ? 'Update' : 'Add' %>
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="footer-script">
  <script type="text/javascript">
    var exists_url = "<%-admin_url%>/products/exists";
  </script>

  <script
    defer
    src="<%-assets_url%>assets/js/validation/validate.min.js"
    type="text/javascript"
  ></script>
  <script
    defer
    src="<%-assets_url%>assets/js/validation/additional-methods.min.js"
    type="text/javascript"
  ></script>
  <script
    defer
    src="<%-assets_url%>assets/js/pages/admin/product.js"
    type="text/javascript"
  ></script>
  <script
    defer
    src="<%-assets_url%>assets/js/pages/addsection.js"
    type="text/javascript"
  ></script>
  <!-- <script type="text/javascript">
    // add row
  
    // remove row
    $(document).on("click", "#removeRow", function () {
      $(this).closest("#inputFormRow").remove();
    });
  </script> -->
</div>
